@{
	ViewBag.Title = "Index";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<form id="budSearch">
	<div>
		<h6>Search by Strain</h6>
		<input id="strainQuery" type="text" name="strainQuery" placeholder="strain" /><br />
		<input id="btnPriceSearch" type="submit" onclick="submitStrainForPriceSearch(strainQuery); return false;" value="find prices" /><br />
		<input id="radioConcentrate" type="radio" name="budType" value="concentrates" />concentrate<br />
		<input id="radioEdible" type="radio" name="budType" value="edibles" />edible<br />
		<input id="radioFlower" type="radio" name="budType" value="flowers" />flower<br />
		<input id="radioOther" type="radio" name="budType" value="other" />other<br />
	</div>
	<div>
	</div>
</form>
<div id="results">

</div>
<div id="results-raw">

</div>

<script src="~/Scripts/jquery-1.10.2.js"></script>
<script>
	function submitStrainForPriceSearch(strainId) {
		var strainId = $("#strainQuery").val();
		var type = $("input:radio[name=budType]:checked").val();
		var results;
		$.getJSON("/ProductList/AveragePrice/" + strainId + "/" + type, function (data) {
			console.log("success");
			//console.log(data);
			$('#results-raw').append(JSON.stringify(data));
			var items = [];
			$.each(data, function (key, val) {
				$.each(val, function (key, val) {
					$.each(val, function (key, val) {
						items.push("<li>" + key + ": " + val + "</li>");
					});
				});
			});

			results = $("<ul/>", {
				"class": "my-new-list",
				html: items.join("")
			});
			$('#results').html(results);
		});
	}
</script>